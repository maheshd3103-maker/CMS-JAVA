{"ast":null,"code":"import _objectSpread from\"C:/Users/2382082/Downloads/CMS/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useParams,useNavigate}from'react-router-dom';import{complaintAPI}from'../services/api';import Sidebar from'../components/Sidebar';import'./Dashboard.css';import'./Forms.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RaiseComplaint=()=>{const{userId}=useParams();const navigate=useNavigate();const[formData,setFormData]=useState({complaintType:'',complaintDescription:'',issueDate:''});const[loading,setLoading]=useState(false);const[error,setError]=useState('');const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');try{const response=await complaintAPI.submitComplaint(_objectSpread(_objectSpread({},formData),{},{userId:userId}));// Show success message with tracking ID\nalert(\"Complaint submitted successfully! Your tracking ID is: \".concat(response.data.trackingId));navigate(\"/user/dashboard/\".concat(userId));}catch(error){var _error$response,_error$response$data;if((_error$response=error.response)!==null&&_error$response!==void 0&&(_error$response$data=_error$response.data)!==null&&_error$response$data!==void 0&&_error$response$data.error){setError(error.response.data.error);}else{setError('Failed to submit complaint. Please try again.');}}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-layout\",children:[/*#__PURE__*/_jsx(Sidebar,{userRole:\"USER\",userId:userId,activeItem:\"raise\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Raise a Complaint\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Submit your complaint details\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Complaint Form\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"complaintType\",children:\"Type of Complaint\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"complaintType\",name:\"complaintType\",value:formData.complaintType,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select complaint type\"}),/*#__PURE__*/_jsx(\"option\",{value:\"billing\",children:\"Billing Issue\"}),/*#__PURE__*/_jsx(\"option\",{value:\"service\",children:\"Service Issue\"}),/*#__PURE__*/_jsx(\"option\",{value:\"technical\",children:\"Technical Issue\"}),/*#__PURE__*/_jsx(\"option\",{value:\"account\",children:\"Account Issue\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"Other\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"complaintDescription\",children:\"Complaint Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"complaintDescription\",name:\"complaintDescription\",value:formData.complaintDescription,onChange:handleChange,placeholder:\"Describe your complaint in detail...\",rows:\"5\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"issueDate\",children:\"Date of Issue\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"issueDate\",name:\"issueDate\",value:formData.issueDate,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?'Submitting...':'Submit Complaint'}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error})]})]})]})]});};export default RaiseComplaint;","map":{"version":3,"names":["React","useState","useParams","useNavigate","complaintAPI","Sidebar","jsx","_jsx","jsxs","_jsxs","RaiseComplaint","userId","navigate","formData","setFormData","complaintType","complaintDescription","issueDate","loading","setLoading","error","setError","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","response","submitComplaint","alert","concat","data","trackingId","_error$response","_error$response$data","className","children","userRole","activeItem","onSubmit","htmlFor","id","onChange","required","placeholder","rows","type","disabled"],"sources":["C:/Users/2382082/Downloads/CMS/frontend/src/pages/RaiseComplaint.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { complaintAPI } from '../services/api';\nimport Sidebar from '../components/Sidebar';\nimport './Dashboard.css';\nimport './Forms.css';\n\nconst RaiseComplaint = () => {\n  const { userId } = useParams();\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState({\n    complaintType: '',\n    complaintDescription: '',\n    issueDate: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      const response = await complaintAPI.submitComplaint({\n        ...formData,\n        userId: userId\n      });\n      \n      // Show success message with tracking ID\n      alert(`Complaint submitted successfully! Your tracking ID is: ${response.data.trackingId}`);\n      navigate(`/user/dashboard/${userId}`);\n    } catch (error) {\n      if (error.response?.data?.error) {\n        setError(error.response.data.error);\n      } else {\n        setError('Failed to submit complaint. Please try again.');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"dashboard-layout\">\n      <Sidebar userRole=\"USER\" userId={userId} activeItem=\"raise\" />\n      <div className=\"main-content\">\n        <div className=\"header\">\n          <h1>Raise a Complaint</h1>\n          <p>Submit your complaint details</p>\n        </div>\n        \n        <div className=\"form-card\">\n          <h2>Complaint Form</h2>\n          <form onSubmit={handleSubmit}>\n            <div className=\"form-group\">\n              <label htmlFor=\"complaintType\">Type of Complaint</label>\n              <select\n                id=\"complaintType\"\n                name=\"complaintType\"\n                value={formData.complaintType}\n                onChange={handleChange}\n                required\n              >\n                <option value=\"\">Select complaint type</option>\n                <option value=\"billing\">Billing Issue</option>\n                <option value=\"service\">Service Issue</option>\n                <option value=\"technical\">Technical Issue</option>\n                <option value=\"account\">Account Issue</option>\n                <option value=\"other\">Other</option>\n              </select>\n            </div>\n            \n            <div className=\"form-group\">\n              <label htmlFor=\"complaintDescription\">Complaint Description</label>\n              <textarea\n                id=\"complaintDescription\"\n                name=\"complaintDescription\"\n                value={formData.complaintDescription}\n                onChange={handleChange}\n                placeholder=\"Describe your complaint in detail...\"\n                rows=\"5\"\n                required\n              />\n            </div>\n            \n            <div className=\"form-group\">\n              <label htmlFor=\"issueDate\">Date of Issue</label>\n              <input\n                type=\"date\"\n                id=\"issueDate\"\n                name=\"issueDate\"\n                value={formData.issueDate}\n                onChange={handleChange}\n                required\n              />\n            </div>\n            \n            <button type=\"submit\" className=\"btn btn-primary\" disabled={loading}>\n              {loading ? 'Submitting...' : 'Submit Complaint'}\n            </button>\n            \n            {error && <div className=\"error\">{error}</div>}\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RaiseComplaint;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
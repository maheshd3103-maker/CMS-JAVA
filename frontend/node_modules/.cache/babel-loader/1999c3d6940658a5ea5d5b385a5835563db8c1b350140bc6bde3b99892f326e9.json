{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{complaintAPI}from'../services/api';import Sidebar from'../components/Sidebar';import'./Dashboard.css';import'./Forms.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ActiveComplaints=()=>{const[complaints,setComplaints]=useState([]);const[sortedComplaints,setSortedComplaints]=useState([]);const[sortOrder,setSortOrder]=useState('desc');const[loading,setLoading]=useState(true);const navigate=useNavigate();useEffect(()=>{const fetchComplaints=async()=>{try{const response=await complaintAPI.getActiveComplaints();setComplaints(response.data);setSortedComplaints(response.data.sort((a,b)=>new Date(b.issueDate)-new Date(a.issueDate)));}catch(error){console.error('Error fetching complaints:',error);}finally{setLoading(false);}};fetchComplaints();},[]);const handleSort=()=>{const newOrder=sortOrder==='desc'?'asc':'desc';setSortOrder(newOrder);const sorted=[...complaints].sort((a,b)=>{return newOrder==='desc'?new Date(b.issueDate)-new Date(a.issueDate):new Date(a.issueDate)-new Date(b.issueDate);});setSortedComplaints(sorted);};const getStatusClass=status=>{switch(status.toLowerCase()){case'pending':return'pending';case'in progress':return'in-progress';case'resolved':return'resolved';default:return'';}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-layout\",children:[/*#__PURE__*/_jsx(Sidebar,{userRole:\"MANAGER\",activeItem:\"active\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Active Complaints\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage all active complaints\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary\",onClick:handleSort,children:[\"Sort by Date (\",sortOrder==='desc'?'Newest First':'Oldest First',\")\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Tracking ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Customer\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Issue Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:sortedComplaints.length>0?sortedComplaints.map(complaint=>{var _complaint$user;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"tracking-id\",children:complaint.trackingId}),/*#__PURE__*/_jsx(\"td\",{children:(_complaint$user=complaint.user)===null||_complaint$user===void 0?void 0:_complaint$user.username}),/*#__PURE__*/_jsx(\"td\",{children:complaint.complaintType}),/*#__PURE__*/_jsx(\"td\",{children:complaint.complaintDescription}),/*#__PURE__*/_jsx(\"td\",{children:complaint.issueDate}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status \".concat(getStatusClass(complaint.status)),children:complaint.status})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-sm\",onClick:()=>navigate(\"/complaint/details/\".concat(complaint.complaintId)),children:\"View Details\"})})]},complaint.complaintId);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{colSpan:\"7\",className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"No active complaints\"}),/*#__PURE__*/_jsx(\"p\",{children:\"All complaints have been resolved.\"})]})})})]})})]})]});};export default ActiveComplaints;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","complaintAPI","Sidebar","jsx","_jsx","jsxs","_jsxs","ActiveComplaints","complaints","setComplaints","sortedComplaints","setSortedComplaints","sortOrder","setSortOrder","loading","setLoading","navigate","fetchComplaints","response","getActiveComplaints","data","sort","a","b","Date","issueDate","error","console","handleSort","newOrder","sorted","getStatusClass","status","toLowerCase","className","children","userRole","activeItem","onClick","length","map","complaint","_complaint$user","trackingId","user","username","complaintType","complaintDescription","concat","complaintId","colSpan"],"sources":["C:/Users/2382082/Downloads/CMS/frontend/src/pages/ActiveComplaints.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { complaintAPI } from '../services/api';\nimport Sidebar from '../components/Sidebar';\nimport './Dashboard.css';\nimport './Forms.css';\n\nconst ActiveComplaints = () => {\n  const [complaints, setComplaints] = useState([]);\n  const [sortedComplaints, setSortedComplaints] = useState([]);\n  const [sortOrder, setSortOrder] = useState('desc');\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchComplaints = async () => {\n      try {\n        const response = await complaintAPI.getActiveComplaints();\n        setComplaints(response.data);\n        setSortedComplaints(response.data.sort((a, b) => new Date(b.issueDate) - new Date(a.issueDate)));\n      } catch (error) {\n        console.error('Error fetching complaints:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchComplaints();\n  }, []);\n\n  const handleSort = () => {\n    const newOrder = sortOrder === 'desc' ? 'asc' : 'desc';\n    setSortOrder(newOrder);\n    const sorted = [...complaints].sort((a, b) => {\n      return newOrder === 'desc' \n        ? new Date(b.issueDate) - new Date(a.issueDate)\n        : new Date(a.issueDate) - new Date(b.issueDate);\n    });\n    setSortedComplaints(sorted);\n  };\n\n  const getStatusClass = (status) => {\n    switch (status.toLowerCase()) {\n      case 'pending': return 'pending';\n      case 'in progress': return 'in-progress';\n      case 'resolved': return 'resolved';\n      default: return '';\n    }\n  };\n\n  if (loading) {\n    return <div className=\"loading\">Loading...</div>;\n  }\n\n  return (\n    <div className=\"dashboard-layout\">\n      <Sidebar userRole=\"MANAGER\" activeItem=\"active\" />\n      <div className=\"main-content\">\n        <div className=\"header\">\n          <h1>Active Complaints</h1>\n          <p>Manage all active complaints</p>\n          <button \n            className=\"btn btn-secondary\"\n            onClick={handleSort}\n          >\n            Sort by Date ({sortOrder === 'desc' ? 'Newest First' : 'Oldest First'})\n          </button>\n        </div>\n        \n        <div className=\"table-container\">\n          <table className=\"table\">\n            <thead>\n              <tr>\n                <th>Tracking ID</th>\n                <th>Customer</th>\n                <th>Type</th>\n                <th>Description</th>\n                <th>Issue Date</th>\n                <th>Status</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {sortedComplaints.length > 0 ? (\n                sortedComplaints.map((complaint) => (\n                  <tr key={complaint.complaintId}>\n                    <td className=\"tracking-id\">{complaint.trackingId}</td>\n                    <td>{complaint.user?.username}</td>\n                    <td>{complaint.complaintType}</td>\n                    <td>{complaint.complaintDescription}</td>\n                    <td>{complaint.issueDate}</td>\n                    <td>\n                      <span className={`status ${getStatusClass(complaint.status)}`}>\n                        {complaint.status}\n                      </span>\n                    </td>\n                    <td>\n                      <button \n                        className=\"btn btn-primary btn-sm\"\n                        onClick={() => navigate(`/complaint/details/${complaint.complaintId}`)}\n                      >\n                        View Details\n                      </button>\n                    </td>\n                  </tr>\n                ))\n              ) : (\n                <tr>\n                  <td colSpan=\"7\" className=\"empty-state\">\n                    <h3>No active complaints</h3>\n                    <p>All complaints have been resolved.</p>\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ActiveComplaints;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}